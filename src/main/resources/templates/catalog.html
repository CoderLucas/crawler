<!DOCTYPE HTML>
<html>
<!-- Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=utf-8"/><!-- /Added by HTTrack -->
<head>
    <meta charset="UTF-8"/>

    <meta name="description" content=""/>
    <meta name="keywords" content=""/>

    <title>商品</title>

    <link rel="shortcut icon" href="favicon.ico"/>
    <link href="css/style.css" media="screen" rel="stylesheet" type="text/css"/>
    <link href="css/grid.css" media="screen" rel="stylesheet" type="text/css"/>

    <script src="js/jquery-1.7.2.min.js"></script>
    <script src="js/html5.js"></script>
    <script src="js/jflow.plus.js"></script>
    <script src="js/jquery.carouFredSel-5.2.2-packed.js"></script>

    <script>
        $(document).ready(function () {
            $("#myController").jFlow({
                controller: ".control", // must be class, use . sign
                slideWrapper: "#jFlowSlider", // must be id, use # sign
                slides: "#slider",  // the div where all your sliding divs are nested in
                selectedWrapper: "jFlowSelected",  // just pure text, no sign
                width: "984px",  // this is the width for the content-slider
                height: "480px",  // this is the height for the content-slider
                duration: 400,  // time in miliseconds to transition one slide
                prev: ".slidprev", // must be class, use . sign
                next: ".slidnext", // must be class, use . sign
                auto: true
            });
        });
    </script>
    <script>
        $(function () {
            $('#list_product').carouFredSel({
                prev: '#prev_c1',
                next: '#next_c1',
                auto: false
            });
            $('#list_product2').carouFredSel({
                prev: '#prev_c2',
                next: '#next_c2',
                auto: false
            });
            $(window).resize();
        });
    </script>
    <script>
        $(document).ready(function () {
            $("button").click(function () {
                $(this).addClass('click')
            });
        })
    </script>

</head>
<body>
<div class="container_12">
    <div id="top">
        <div class="grid_10">
            <div class="welcome">
                新媒体学院 网络工程 卢健浩
            </div><!-- .phone_top -->
        </div><!-- .grid_3 -->
    </div><!-- #top -->

    <div class="clear"></div>

    <header id="branding">
        <div class="grid_4">
            <hgroup>
                <h1 id="site_logo"><a href="index" title=""><img src="images/logo.png"
                                                                      alt="Online Store Theme Logo"/></a></h1>
            </hgroup>
        </div><!-- .grid_3 -->

        <div class="grid_4">
            <form class="search" id="search">
                <input type="text" name="name" class="entry_form" value="" placeholder="在商店内搜索..." id="input_search"/>
            </form>
        </div><!-- .grid_3 -->

    </header><!-- #branding -->
</div><!-- .container_12 -->

<div class="clear"></div>

<div id="block_nav_primary">
    <div class="container_12">
        <div class="grid_12">
            <nav class="primary">
                <ul>
                    <li class="curent"><a href="index">首页</a></li>
                    <li><a href="catalog">列表</a></li>
                    <li>
                        <a href="#">所有</a>
                        <ul class="sub">
                            <li><a href="index">首页</a></li>
                            <li><a href="catalog">列表</a></li>
                            <li><a href="about">关于我</a></li>
                            <li><a href="404">404</a></li>
                        </ul>
                    </li>
                </ul>
            </nav><!-- .primary -->
        </div><!-- .grid_12 -->
    </div><!-- .container_12 -->
</div><!-- .block_nav_primary -->

<div class="clear"></div>

<section id="main">
    <div class="container_12">
        <div id="sidebar" class="grid_3">
            <aside id="specials" class="specials">
                <h3>特价</h3>

                <ul id="specials_list">

                </ul>
            </aside><!-- #specials -->

            <aside id="hot" class="specials">
                <h3>热销</h3>

                <ul id="hot_list">
                    <li>
                        <div class="prev">
                            <a href="product_page.html"><img src="images/special2.png" alt="" title=""/></a>
                        </div>

                        <div class="cont">
                            <a href="product_page.html">Honeysuckle Flameless Luminary Refill</a>
                            <div class="prise"><span class="old">$177.00</span>$75.00</div>
                        </div>
                    </li>
                </ul>
            </aside><!-- #specials -->


            <aside id="newsletter_signup">
                <h3>联系我们</h3>
                <p>请告诉我们，您希望商城能上架什么商品。</p>

                <form class="newsletter">
                    <input type="email" name="newsletter" class="your_email" value="" placeholder="请输入..."/>
                    <input type="submit" id="submit" value="提交"/>
                </form>
            </aside><!-- #newsletter_signup -->
        </div><!-- .sidebar -->

        <div id="content" class="grid_9">
            <h1 class="page_title">商品列表</h1>
            <div class="grid_product" id="grid_product">
                <div class="grid_3 product">
                    <div class="prev">
                        <a href="product_page.html"><img src="images/product_1.png" alt="" title=""/></a>
                    </div><!-- .prev -->
                    <h3 class="title">Febreze Air Effects New Zealand Springs</h3>
                    <div class="cart">
                        <div class="price">
                            <div class="vert">
                                <div class="price_new">$550.00</div>
                                <div class="price_old">$725.00</div>
                            </div>
                        </div>
                        <a href="#" class="obn"></a>
                        <a href="#" class="like"></a>
                        <a href="#" class="bay"></a>
                    </div><!-- .cart -->
                </div><!-- .grid_3 -->

                <div class="clear"></div>
            </div><!-- .grid_product -->

            <div class="clear"></div>

            <div class="pagination" id="page_nav_area">
                <ul>
                    <li class="prev"><span>&#8592;</span></li>
                    <li class="curent"><a href="#">1</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">5</a></li>
                    <li><span>...</span></li>
                    <li><a href="#">100</a></li>
                    <li class="next"><a href="#">&#8594;</a></li>
                </ul>
            </div><!-- .pagination -->
        </div><!-- #content -->

        <div class="clear"></div>

    </div><!-- .container_12 -->
</section><!-- #main -->

<div class="clear"></div>

<footer>
    <div class="f_navigation">
        <div class="container_12">
            <div class="grid_4">
                <h3>关于我</h3>
                <ul class="f_contact">
                    <li>新媒体学院</li>
                    <li>网络工程</li>
                    <li>卢健浩</li>
                </ul><!-- .f_contact -->
            </div><!-- .grid_3 -->

            <div class="grid_4">
                <h3>信息</h3>
                <nav class="f_menu">
                    <ul>
                        <li><a href="about">关于我</a></li>
                        <li><a href="about">隐私政策</a></li>
                        <li><a href="about">条款和条件</a></li>
                    </ul>
                </nav><!-- .private -->
            </div><!-- .grid_3 -->

            <div class="grid_4">
                <h3>客户服务</h3>
                <nav class="f_menu">
                    <ul>
                        <li><a href="about">联系方式</a></li>
                        <li><a href="about">常问问题</a></li>
                        <li><a href="about">网站地图</a></li>
                    </ul>
                </nav><!-- .private -->
            </div><!-- .grid_3 -->

            <div class="clear"></div>
        </div><!-- .container_12 -->
    </div><!-- .f_navigation -->
</footer>
<script type="text/javascript">

    var name = GetQueryString("name");

    $(function () {
        get_product(1);
        get_specials_product();
        get_hot_product();
    });

    function get_product(pn) {


        var form = $("<form></form>");
        var input_name = $("<input/>").attr('value', name).attr("name", "name");
        var input_pn = $("<input/>").attr('value', pn).attr("name", "pn");
        form.append(input_name);
        form.append(input_pn);

        $.ajax({
            url: "/goods/list?" + form.serialize(),
            type: "GET",
            success: function (result) {
                console.log(result);
                $("#grid_product div").remove();
                build_page_nav(result);
                var list = result.data.goods.list;
                $.each(list, function (index, item) {
                    var image = $("<img/>").attr("src", item.image);
                    var a = $("<a></a>").attr("href", "product?id=" + item.eid).append(image);
                    var prev = $("<div></div>").addClass("prev").append(a);

                    var h3 = $("<h3></h3>").addClass("title").append(item.name);

                    var price_new_cart = $("<div></div>").addClass("price_new").append(item.discountprice + ".00 元");
                    var price_old_cart = $("<div></div>").addClass("price_old").append(item.price + ".00");
                    var vert_cart = $("<div></div>").addClass("vert")
                        .append(price_new_cart).append(price_old_cart);
                    var price_cart = $("<div></div>").addClass("price")
                        .append(vert_cart);
                    var obn = $("<a></a>").addClass("obn").attr("href", "#");
                    var like = $("<a></a>").addClass("like").attr("href", "#");
                    var bay = $("<a></a>").addClass("bay").attr("href", "#");
                    var cart = $("<div></div>").addClass("cart")
                        .append(price_cart).append(obn).append(like).append(bay);

                    var product = $("<div></div>").addClass("grid_3 product")
                        .append(prev).append(h3).append(cart).appendTo("#grid_product");
                })

            }
        });
    }

    function get_specials_product() {
        $.ajax({
            url: "/goods/list?type=3",
            type: "GET",
            success: function (result) {
                console.log(result);
                $("#specials_list li").remove();
                var list = result.data.goods.list;
                $.each(list, function (index, item) {
                    var image = $("<img/>").attr("src", item.image);
                    var href_img = $("<a></a>").attr("href", "product?id=" + item.eid).append(image);
                    var prev = $("<div></div>").addClass("prev").append(href_img);

                    var href_str = $("<a></a>").attr("href", "product?id=" + item.eid).append(item.name);
                    var old_price = $("<span></span>").addClass("old").append(item.price + ".00");
                    var div_price = $("<div></div>").addClass("prise").append(old_price).append(item.discountprice + ".00 元");
                    var cont = $("<div></div>").addClass("cont").append(href_str).append(div_price);
                    $("<li></li>").append(prev).append(cont).appendTo("#specials_list");
                })
            }
        });
    }

    function get_hot_product() {
        $.ajax({
            url: "/goods/list?type=1",
            type: "GET",
            success: function (result) {
                console.log(result);
                $("#hot_list li").remove();
                var list = result.data.goods.list;
                $.each(list, function (index, item) {
                    var image = $("<img/>").attr("src", item.image);
                    var href_img = $("<a></a>").attr("href", "product?id=" + item.eid).append(image);
                    var prev = $("<div></div>").addClass("prev").append(href_img);

                    var href_str = $("<a></a>").attr("href", "product?id=" + item.eid).append(item.name);
                    var old_price = $("<span></span>").addClass("old").append(item.price + ".00");
                    var div_price = $("<div></div>").addClass("prise").append(old_price).append(item.discountprice + ".00 元");
                    var cont = $("<div></div>").addClass("cont").append(href_str).append(div_price);
                    $("<li></li>").append(prev).append(cont).appendTo("#hot_list");
                })
            }
        });
    }

    //解析显示分页条
    function build_page_nav(result) {
        //清空表格数据
        $("#page_nav_area").empty();
        var ul = $("<ul></ul>");

        $.each(result.data.goods.navigatepageNums, function (index, item) {
            var numLi = $("<li></li>").append($("<a></a>").append(item));
            //判断当前页码，分页条显示高亮
            if (result.data.goods.pageNum == item) {
                numLi.addClass("curent");
            }
            numLi.click(function () {
                get_product(item);
            });
            ul.append(numLi);
        });

        ul.appendTo("#page_nav_area");
    }

    //弹出新增用户按钮
    $("#submit").click(function () {
        alert("感谢您的反馈！");
    });

    function GetQueryString(name) {
        var reg = new RegExp("(^|&amp;)" + name + "=([^&amp;]*)(&amp;|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]);
        return "";
    }

    $("form").submit(function () {
        var index = document.getElementById("input_search").value;
        var url = "catalog?name=" + index;
        self.location.href(url);
    });

</script>
</body>
<!-- Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=utf-8"/><!-- /Added by HTTrack -->
</html>
